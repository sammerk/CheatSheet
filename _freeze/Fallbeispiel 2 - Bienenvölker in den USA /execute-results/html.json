{
  "hash": "25694280a41b3b308507aca0a8f19a2d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Fallbeispiel 2 - Bienenvölker in den USA\"\nformat:\n  live-html:\n    css: \n      - brand.css     \n      - exams/webex.css\n    include-after-body: exams/webex.js\nengine: knitr\nlightbox: true\n---\n\n\n::: {.cell}\n\n:::\n\n\n\n# Die Daten\n\nIn diesem Fallbeispiel wird die Entwicklung der Anzahl von Bienenvölkern in den USA untersucht. Die Daten stammen aus dem [USDA-National Agricultural Statistics Service](https://esmis.nal.usda.gov/publication/honey-bee-colonies) und umfassen Informationen zu Verlust und Stressfaktoren sowie neu eingesetzten Völkern.\n\n## Import der Daten\n\nDie Daten können wie folgt geladen werden:\n\n\n::: {.cell}\n\n:::\n\n\n## Variablenbeschreibung\n\nSie enthalten die [folgenden Variablen](https://github.com/rfordatascience/tidytuesday/tree/main/data/2022/2022-01-11):\n\n### Datensatz `colony.csv`\n\n| variable | class | description |\n|:-----------------------------|:------------------|:----------------------|\n| year | character | year |\n| months | character | month |\n| state | character | State Name (note there is United States and Other States) |\n| colony_n | integer | Number of colonies |\n| colony_max | integer | Maximum colonies |\n| colony_lost | integer | Colonies lost |\n| colony_lost_pct | integer | Percent of total colonies lost |\n| colony_added | integer | Colonies added |\n| colony_reno | integer | Colonies renovated |\n| colony_reno_pct | integer | Percent of colonies renovated |\n\n### Datensatz `stressor.csv`\n\n| variable | class | description |\n|:-----------------------|:---------------------|:-------------------------|\n| year | character | Year |\n| months | character | Month range |\n| state | character | State Name (note there is United States and Other States) |\n| stressor | character | Stress type |\n| stress_pct | double | Percent of colonies affected by stressors anytime during the quarter, colony can be affected by multiple stressors during same quarter. |\n\n\n## Wie verteilen sich die Völkeranzahl zwischen den States?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\ncolony %>% \n    ggplot(aes(x = colony_n)) +\n    geom_histogram() +\n    facet_grid(year ~ months)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 47 rows containing non-finite outside the scale range\n(`stat_bin()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Fallbeispiel-2---Bienenvölker-in-den-USA-_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nIn diesem Plot fällt zunächst auf, dass die Quartale alphabetisch sortiert sind und nicht chronologisch. Daher wird eine neue Zeitvariable kodiert:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\ncolony <- colony %>%\n  mutate(\n    months_num = case_when(\n      months == \"January-March\" ~ 1,\n      months == \"April-June\" ~ 2,\n      months == \"July-September\" ~ 3,\n      months == \"October-December\" ~ 4\n    ),\n    time_date = ymd(paste(year, months_num, \"01\", sep = \"-\"))\n  )\n```\n:::\n\n\n\nZudem scheint die Variable `colony_n` sehr rechtsschief verteilt zu sein.\n\nEin Blick in die Variable `state` zeigt, dass es dort sehr heterogene Gruppen gibt.\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(colony$state)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n       Alabama        Arizona       Arkansas     California       Colorado \n            26             26             26             26             26 \n   Connecticut        Florida        Georgia         Hawaii          Idaho \n            26             26             26             26             26 \n      Illinois        Indiana           Iowa         Kansas       Kentucky \n            26             26             26             26             26 \n     Louisiana          Maine       Maryland  Massachusetts       Michigan \n            26             26             26             26             26 \n     Minnesota    Mississippi       Missouri        Montana       Nebraska \n            26             26             26             26             26 \n    New Jersey     New Mexico       New York North Carolina   North Dakota \n            26             26             26             26             26 \n          Ohio       Oklahoma         Oregon   Other States   Pennsylvania \n            26             26             26             26             26 \nSouth Carolina   South Dakota      Tennessee          Texas  United States \n            26             26             26             26             26 \n          Utah        Vermont       Virginia     Washington  West Virginia \n            26             26             26             26             26 \n     Wisconsin        Wyoming \n            26             26 \n```\n\n\n:::\n:::\n\n\nLöst man über diese auf, ergeben sich deutlich erwartungskonformere Verteilungen:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggforce)\ncolony %>%\n  filter(\n    state %in%\n      c(\"Nebraska\", \"Wyoming\", \"Utah\", \"Pensylvania\", \"Oklahoma\", \"Arizona\", \"Arkansas\")\n  ) %>%\n  ggplot(aes(x = colony_n, y = state)) +\n  geom_sina() +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 6 rows containing non-finite outside the scale range\n(`stat_sina()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Fallbeispiel-2---Bienenvölker-in-den-USA-_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nWie kann man nun den Unterscheid zwischen z.B. Utah und Oklahoma treffend beschreiben? Ein reiner Vergleich der Mittelwerte scheint etwas missleading:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolony %>%\n  filter(state %in% c(\"Utah\", \"Oklahoma\")) %>%\n  group_by(state) %>% \n  summarize(MW = mean(colony_n, na.rm = T))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  state       MW\n  <chr>    <dbl>\n1 Oklahoma 12368\n2 Utah     21460\n```\n\n\n:::\n:::\n\n\nDer Mittelwert Utahs liegt bei 174% des Mittelwertes von Oklahoma, jedoch ist die Probability of Superiority bei 78%%. Das bedeutet, dass wenn man 100 mal zufällig gewählte Datenpunkte aus Utah und Oklahoma vergleicht, 22 mal Oklahoma »gewinnt« und 78 mal Utah.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(effsize)\nVD.A(\n  colony_n ~ state,\n  data = colony %>%\n    filter(state %in% c(\"Utah\", \"Oklahoma\"))\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nVargha and Delaney A\n\nA estimate: 0.2184 (large)\n```\n\n\n:::\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggforce)\ncolony %>%\n  filter(\n    state %in%\n      c(\"Nebraska\", \"Wyoming\", \"Utah\", \"Pensylvania\", \"Oklahoma\", \"Arizona\", \"Arkansas\")\n  ) %>%\n  ggplot(aes(x = colony_n, y = state)) +\n  geom_jitter(aes(color = months), height = .2) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 6 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Fallbeispiel-2---Bienenvölker-in-den-USA-_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}